<html>
  <head>
    <title><%= title %></title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Arima+Madurai:wght@800&family=Rubik+Moonrocks&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/css/home.css" />

    <body>
      <h2>Welcome to the Home Page of CODEIAL</h2>
      <div>
        <!-- Since, "locals.user" is created only when "req.isAuthenticated()" returns true thus, we can use 
          "locals.user" in case we don't have access to "req.isAuthenticated()" or callback function with arguement as req -->
        <% if (locals.user){ %>
        <a href="/user/profile">
          <!--  -->
          <button class="profile-signup">Profile</button>
        </a>
        <h3>Posts</h3>
        <form action="/post/create" id="new-post" method="post">
          <textarea name="content" cols="50" rows="5"> </textarea>
          <button type="submit" id="post-btn">Post</button>
        </form>

        <!-- <h3><%= locals.user.name %>'s Posts</h3> -->
        <div id="older-posts">
          <% post.map(function(posts){ %>
          <div class="user">
            <div class="user-name">
              <b><%= posts.user.name %></b> posted on
              <!--  -->
              <% const date = posts.createdAt.toDateString() %> <%= date %>
            </div>
            <!-- <span id="user-name"> <%= locals.user.name %> </span> -->
            <div class="user-post"><%= posts.content %></div>
          </div>
          <%} ) %>
        </div>

        <% } else { %>
        <a href="/user/signin">
          <button id="signin">Sign In</button>
        </a>

        <a href="/user/signup">
          <button class="profile-signup">Sign Up</button>
        </a>
        <% } %>
      </div>
    </body>
  </head>
</html>
